# v0.5以前からのアップグレード

## 主な変更一覧

- [親子リソースの定義方法の変更](#diff1)
- [セレクタの省略記法](#diff2)

## 親子リソースの定義方法の変更 {: #diff1 }

v0.5では親子リソースの定義方法が変更されました。

#### v0.5以前

```yaml
resources:
  - type: ELB
    name: "elb" 
    selector:
      names: ["example"]
    resources:
    - type: ServerGroup
      name: "server-group" 
      zone: "is1a"
```

#### v0.5〜 

```yaml
resources:
  - type: ServerGroup
    name: "server-group" 
    zone: "is1a"
    
    # 親リソースの定義
    parent:
      type: ELB
      selector:
        names: ["example"]
```

従来は親リソース側の`resources`フィールドで子リソースを定義していましたが、
v0.5以降は子リソース側の`parent`フィールドで親リソースを定義するようになりました。

## セレクタの省略記法 {: #diff2 }

一部のセレクタにおいて省略記法に対応しました。

```yaml
parent:
  type: ELB
  selector: "example" #省略記法
```

`selector`に文字列を指定すると`names`に単一要素のリストを指定するのと同等の意味合いになります。

```yaml
parent:
  type: ELB
  
  # 先ほどの例と同等の指定を省略せずに書いた場合
  selector:
    names: ["example"]
```

この省略記法はコンフィギュレーションリファレンスで`name_or_resource_selector`型となっている項目で利用可能です。