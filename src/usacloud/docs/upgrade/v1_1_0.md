# v1.1.0へのアップグレードガイド

このガイドはUsacloud v1.0を利用していた方がv1.1へアップグレードする際のガイドです。  
v0系を利用していた方は[v1.0.0へのアップグレードガイド](../v1_0_0)から参照してください。

## 主な変更点

### コマンド挙動の変更

- VPCルータのバージョン指定対応

### 機能追加
  
- JSON出力時のANSIカラー対応
- プロファイルの`DefaultOutputType`と`DefaultQueryDriver`を環境変数経由で指定可能に
- `--query`でjq互換機能を利用可能に
- 対象リソースを引数で指定する場合に引数とリソース名を完全一致させるオプションを追加
- セルフアップデート機能の追加
- データベースアプライアンスでのパラメータ指定機能
- `rest`サブコマンドでの`--query`のサポート

---

### VPCルータのバージョン指定対応

VPCルータ作成時に`--version`を指定することでVPCルータのバージョンを指定可能になりました。  
指定可能な値は`1`と`2`で、省略時のデフォルトは`2`になります。  

VPCルータのバージョンについては以下を参照してください。  

[さくらのクラウドドキュメント/VPCルータ](https://manual.sakura.ad.jp/cloud/network/vpc-router/vpc-create.html#id6)

---

### JSON出力時のANSIカラー対応

`--output-type=json`や`--query`指定時の出力がANSIカラー対応しました。  
`--no-color`オプションでカラー出力を無効化できます。

---

### プロファイルの`DefaultOutputType`と`DefaultQueryDriver`を環境変数経由で指定可能に

従来はプロファイルを直接編集する必要がありましたが、環境変数経由で指定可能になりました。  
詳細は[リファレンス/環境変数](../../references/env)を参照してください。

---

### `--query`でjq互換機能を利用可能に

従来は`--query`でJMESPathを利用可能でしたが、jq互換機能も利用可能になりました。  
詳細は[ガイド/クエリ](../../guides/query)を参照してください。

---

### 対象リソースを引数で指定する場合に引数とリソース名を完全一致させるオプションを追加

引数とリソース名を完全一致させるためのオプション`--argument-match-mode`が追加されました。  
詳細は[リファレンス/グローバルオプション](../../references/global)を参照してください。

---

### セルフアップデート機能の追加

Usacloudの新しいバージョンがリリースされていたら自身をアップデートするコマンド`update-self`が追加されました。  
詳細は[リファレンス/update-self](../../references/update-self)を参照してください。

---

### データベースアプライアンスでのパラメータ指定機能

データベースアプライアンスで`max_connections`などのRDBMS固有のパラメータを設定する機能がサポートされました。  
詳細は[リファレンス/database](../../references/database)を参照してください。

---

### `rest`サブコマンドでの`--query`のサポート

`rest`サブコマンドで`--query`による出力の加工が可能になりました。  
詳細は[ガイド/restコマンド](../../guides/rest)を参照してください。